version: 1.0
component: deployment

env:
  variables:
    version: ${APP_VERSION}

files:
  - source: /
    destination: /tmp/

steps:
  - stepType: Command
    name: Setup ENV
    command: |
      # Install Apache HTTP server
      sudo dnf install httpd -y

      # Enable and start Apache
      sudo systemctl enable httpd --now

      # Open HTTP port in firewall
      sudo firewall-cmd --permanent --zone=public --add-service=http
      sudo firewall-cmd --reload
    timeoutInSeconds: 600

  - stepType: Command
    name: Install Apache Web Server
    command: |
      # Remove default Apache test page to avoid conflicts
      sudo rm -f /etc/httpd/conf.d/welcome.conf

      # Determine environment color based on hostname (shell variable only)
      hname=$(hostname)
      bg_color="GREEN"
      if [[ $hname == blue* ]]; then
          bg_color_
